<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pancake - One Stack at a Time</title>
    <link rel="icon" type="image/svg+xml" href="./images/PancakeAppLogo/PancakeMoneyLogo.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Extend Tailwind with smaller max-width sizes
        tailwind.config = {
            theme: {
                extend: {
                    maxWidth: {
                        '4xs': '14rem',  // 224px
                        '5xs': '12rem',  // 192px
                        '6xs': '10rem',  // 160px
                        '7xs': '8rem',   // 128px
                        '8xs': '6rem',   // 96px
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        html {
            scroll-behavior: smooth;
        }
        /* Optimize SVG rendering */
        .svg-crisp {
            image-rendering: optimizeSpeed;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            shape-rendering: geometricPrecision;
            will-change: transform;
        }
        /* Force GPU acceleration for better rendering */
        @media (max-width: 768px) {
            .svg-crisp {
                transform: translateZ(0);
                backface-visibility: hidden;
            }
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- NavBar -->
    <nav class="w-full bg-white shadow-md fixed top-0 left-0 z-50 px-4 md:px-6 py-3 flex justify-between items-center">
        <!-- Left: Logo + Pancake -->
        <div class="flex items-center gap-2">
            <a href="#home">
                <img src="./images/PancakeAppLogo/PancakeMoney.png" alt="Pancake Logo" class="w-7 h-7 object-contain" />
            </a>
            <a href="#home" class="text-3xl font-bold text-black">Pancake</a>
        </div>

        <!-- Right: Nav Links (Desktop) -->
        <div class="hidden md:flex space-x-6 items-center">
            <a href="#about" class="text-gray-700 hover:text-black font-medium">About Us</a>
            <a href="#pancake-pro" class="text-gray-700 hover:text-black font-medium">Pancake Pro</a>
            <a href="#data-privacy" class="text-gray-700 hover:text-black font-medium">Data Privacy</a>
            <a href="#contact" class="text-gray-700 hover:text-black font-medium">Contact</a>
        </div>

        <!-- Hamburger Button (Mobile) -->
        <button id="menu-toggle" class="md:hidden text-gray-900 text-2xl">
            ☰
        </button>
    </nav>

    <!-- Mobile Menu (Hidden by Default) -->
    <div id="mobile-menu" class="hidden fixed top-16 left-0 w-full bg-white shadow-md md:hidden z-[60]">
        <a href="#about" class="block px-8 py-4 text-gray-700 hover:bg-gray-100">About Us</a>
        <a href="#pancake-pro" class="block px-8 py-4 text-gray-700 hover:bg-gray-100">Pancake Pro</a>
        <a href="#data-privacy" class="block px-8 py-4 text-gray-700 hover:bg-gray-100">Data Privacy</a>
        <a href="#contact" class="block px-8 py-4 text-gray-700 hover:bg-gray-100">Contact</a>
    </div>

    <!-- Hero Section - WHITE -->
    <section id="home" class="w-full flex md:flex-row flex-col items-center justify-center px-6 pt-28 pb-20 md:pt-16 md:pb-0 md:px-12 lg:px-24 gap-8 md:gap-12 bg-gray-50 min-h-screen">
        <!-- Text Content -->
        <div class="md:w-1/2 lg:w-5/12 text-center md:text-left">
            <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold text-gray-900 leading-tight">
                Take control<br>of your finances,<br>one stack at a time.
            </h1>
            <p class="text-base sm:text-lg text-gray-600 mt-4 md:mt-6 max-w-lg mx-auto md:mx-0">
                Budgeting simplified. Plan smarter and make your financial goals a reality with the help of Pancake. Coming soon to the App Store.
            </p>
            <!-- Waitlist Form -->
            <div class="w-full mt-6 md:mt-8">
                <form id="waitlist-form" class="space-y-3 max-w-md mx-auto md:mx-0">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input type="email" name="email" placeholder="Email address*" required
                               class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#279B75] focus:ring-1 focus:ring-[#279B75]">
                        <input type="text" name="first_name" placeholder="First name*" required
                               class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#279B75] focus:ring-1 focus:ring-[#279B75]">
                    </div>
                    <select name="use_case"
                            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#279B75] focus:ring-1 focus:ring-[#279B75] text-gray-600">
                        <option value="">What will you use Pancake for? (optional)</option>
                        <option value="personal_budgeting">Personal Budgeting</option>
                        <option value="debt_payoff">Debt Payoff Strategy</option>
                        <option value="savings_goals">Savings Goals</option>
                        <option value="all_of_the_above">All of the Above</option>
                        <option value="other">Other</option>
                    </select>
                    <button type="submit" class="w-full sm:w-auto px-8 py-2.5 bg-[#279B75] text-white font-semibold rounded-lg shadow-lg transition duration-300 hover:bg-[#2E8B57]">
                        Join the Waitlist
                    </button>
                    <div id="form-message" class="hidden text-sm"></div>
                </form>
            </div>
        </div>

        <!-- SVG Image -->
        <div class="md:w-1/2 lg:w-5/12 flex justify-center md:justify-end">
            <picture>
                <source srcset="images/images/dashboard.png" media="(max-width: 768px)">
                <img src="images/images/dashboard.svg" alt="Investing Illustration" class="svg-crisp w-full max-w-4xs md:max-w-2xs lg:max-w-xs" loading="lazy">
            </picture>
        </div>
    </section>

    <!-- About Section - GREEN -->
    <section id="about" class="flex md:flex-row flex-col items-center justify-center px-6 py-20 md:py-32 md:px-12 lg:px-24 gap-8 md:gap-12 bg-[#279B75]">
        <!-- Mission Text -->
        <div class="md:w-1/2 lg:w-5/12 text-left">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-white mb-4 md:mb-6">Our Mission</h1>
            <p class="text-base sm:text-lg text-white leading-relaxed">
                Consumer debt is at an all time high, and cost of living seems to go up by the hour.
                At Pancake, we understand that confronting our finances can feel too time-consuming, overwhelming, and anxiety-inducing.
                We think budgeting should be a source of comfort and security, not stress. No more spreadsheets or guesswork.
                We want to help you take control of your finances — one stack at a time.
            </p>
        </div>

        <!-- SVG Image -->
        <div class="md:w-1/2 lg:w-5/12 flex justify-center">
            <img src="images/images/banking.svg" alt="Relax Illustration" class="svg-crisp w-full max-w-sm md:max-w-md lg:max-w-lg" loading="lazy">
        </div>
    </section>

    <!-- Pancake AI Section - WHITE -->
    <section id="pancake-ai" class="flex md:flex-row flex-col-reverse items-center justify-center px-6 py-20 md:py-32 md:px-12 lg:px-24 gap-8 md:gap-12 bg-gray-50">
        <!-- SVG Image -->
        <div class="md:w-1/2 lg:w-5/12 flex justify-center">
            <img src="images/images/ai_chat.svg" alt="AI Illustration" class="svg-crisp w-full max-w-sm md:max-w-md lg:max-w-lg" loading="lazy">
        </div>

        <!-- Text Content -->
        <div class="md:w-1/2 lg:w-5/12 text-left">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 md:mb-6">Smarter, Simpler Budgeting with AI</h1>
            <p class="text-base sm:text-lg text-gray-700 leading-relaxed">
                Powered by Claude AI, Pancake analyzes your spending patterns and helps identify potential savings opportunities.
                Automatically generate a personalized spending plan, receive useful insights, and start budgeting smarter and faster with Pancake.
            </p>
        </div>
    </section>

    <!-- Data Privacy Section - GREEN -->
    <section id="data-privacy" class="flex md:flex-row flex-col items-center justify-center px-6 py-20 md:py-32 md:px-12 lg:px-24 gap-8 md:gap-12 bg-[#279B75]">
        <!-- Text Content -->
        <div class="md:w-1/2 lg:w-5/12 text-left">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-white mb-4 md:mb-6">Your Data Privacy Matters</h1>
            <p class="text-base sm:text-lg text-white leading-relaxed">
                At Pancake, your data privacy is our top priority.
                We encrypt your information using the same standards that major banks use, and will never sell, share, or monetize your personal data to third parties.
                We believe trust is earned, and protecting your privacy is fundamental to everything we do.
            </p>
        </div>

        <!-- SVG Image -->
        <div class="md:w-1/2 lg:w-5/12 flex justify-center">
            <img src="images/images/data-privacy.svg" alt="Data Privacy Illustration" class="svg-crisp w-full max-w-sm md:max-w-md lg:max-w-lg" loading="lazy">
        </div>
    </section>

    <!-- Contact Section - WHITE -->
    <section id="contact" class="flex flex-col items-center justify-start px-6 py-20 md:py-32 md:px-12 lg:px-24 gap-6 md:gap-8 text-center bg-gray-50">
        <!-- Contact Heading -->
        <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 md:mb-6">Contact Us</h2>

        <!-- Social Icons -->
        <div class="flex justify-center space-x-6 text-gray-600">
            <a href="" target="_blank" rel="noopener noreferrer" aria-label="Follow us on TikTok">
                <img src="./images/AppsLogos/TikTok-logo-CMYK-Stacked-black-simplified.png" alt="Follow us on TikTok" class="w-14 h-14 hover:scale-110 transition-transform" />
            </a>
            <a href="https://www.instagram.com/pancake.money/" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram">
                <img src="./images/AppsLogos/Instagram_Glyph_Black.jpg" alt="Follow us on Instagram" class="w-14 h-14 hover:scale-110 transition-transform" />
            </a>
        </div>

        <!-- Contact Paragraph -->
        <p class="text-base sm:text-lg text-gray-700">
            Need help?
            <a href="mailto:support@pancakemoney.com" class="text-[#279B75] hover:underline font-semibold">
                Email our support team
            </a>
        </p>
    </section>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="fixed bottom-8 right-8 bg-[#279B75] text-white p-3 rounded-full shadow-lg hover:bg-[#2E8B57] transition-all duration-300 opacity-0 invisible z-50" aria-label="Back to top">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
        </svg>
    </button>

    <!-- JavaScript for Mobile Menu Toggle and Back to Top -->
    <script>
        // Remove anchor from URL on page load/refresh
        if (window.location.hash) {
            // Store the hash to optionally scroll to it
            const targetHash = window.location.hash;

            // Remove the hash from the URL without causing a page reload
            history.replaceState(null, null, window.location.pathname + window.location.search);

            // Optional: Still scroll to the element if it exists
            // This maintains the user's position after refresh
            // Comment out the following lines if you don't want to maintain scroll position
            const targetElement = document.querySelector(targetHash);
            if (targetElement) {
                setTimeout(() => {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }, 100);
            }
        }

        // Mobile menu toggle
        document.getElementById('menu-toggle').addEventListener('click', function() {
            var menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });

        // Close mobile menu when clicking on a link
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', function() {
                document.getElementById('mobile-menu').classList.add('hidden');
            });
        });

        // Back to top functionality
        const backToTopButton = document.getElementById('back-to-top');

        // Show/hide button and change color based on button position
        window.addEventListener('scroll', function() {
            const aboutSection = document.getElementById('about');
            const pancakeProSection = document.getElementById('pancake-pro');
            const dataPrivacySection = document.getElementById('data-privacy');
            const contactSection = document.getElementById('contact');

            // Get section positions
            const aboutTop = aboutSection.offsetTop;
            const pancakeProTop = pancakeProSection.offsetTop;
            const dataPrivacyTop = dataPrivacySection.offsetTop;
            const contactTop = contactSection.offsetTop;

            // Show/hide button
            if (window.pageYOffset > 300) {
                backToTopButton.classList.remove('opacity-0', 'invisible');
                backToTopButton.classList.add('opacity-100', 'visible');
            } else {
                backToTopButton.classList.add('opacity-0', 'invisible');
                backToTopButton.classList.remove('opacity-100', 'visible');
            }

            // Get button position (its center point)
            const buttonRect = backToTopButton.getBoundingClientRect();
            const buttonPosition = window.pageYOffset + buttonRect.top + (buttonRect.height / 2);

            // Change button color based on which section the button is over
            if ((buttonPosition >= aboutTop && buttonPosition < pancakeProTop) ||
                (buttonPosition >= dataPrivacyTop && buttonPosition < contactTop)) {
                // Button is over green sections (About or Data Privacy) - make button white
                backToTopButton.classList.remove('bg-[#279B75]', 'hover:bg-[#2E8B57]', 'text-white');
                backToTopButton.classList.add('bg-white', 'hover:bg-gray-100', 'text-[#279B75]');
            } else {
                // Button is over white/gray sections (Home, Pancake Pro, or Contact) - make button green
                backToTopButton.classList.remove('bg-white', 'hover:bg-gray-100', 'text-[#279B75]');
                backToTopButton.classList.add('bg-[#279B75]', 'hover:bg-[#2E8B57]', 'text-white');
            }
        });

        // Smooth scroll to top when clicked
        backToTopButton.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Keyboard accessibility for back to top button
        backToTopButton.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        });

        // Waitlist form submission
        document.getElementById('waitlist-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const form = e.target;
            const submitButton = form.querySelector('button[type="submit"]');
            const messageDiv = document.getElementById('form-message');

            // Disable button and show loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Joining...';

            // Collect form data
            const formData = new FormData(form);
            const data = {
                email: formData.get('email'),
                first_name: formData.get('first_name'),
                use_case: formData.get('use_case') || undefined,
                referral_source: 'website'
            };

            // For production, we'll use a simple email collection approach
            // since Loops.so doesn't support direct browser requests (CORS issue)
            if (window.location.protocol === 'file:' ||
                window.location.hostname === 'localhost' ||
                window.location.hostname === '127.0.0.1' ||
                window.location.hostname === '') {
                // Local development - use backend proxy
                try {
                    const apiUrl = 'http://localhost:8000/api/v1/forms/waitlist';
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();

                    if (response.ok) {
                        // Success - show success message and hide form
                        form.innerHTML = `
                            <div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                                <svg class="w-12 h-12 text-green-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Welcome to the Pancake family!</h3>
                                <p class="text-gray-600">We've sent you an email with more info (check your promotions or spam folder if you can't find it).</p>
                            </div>
                        `;
                    } else {
                        messageDiv.className = 'block text-red-600 text-sm mt-2';
                        messageDiv.textContent = result.detail || 'Something went wrong. Please try again.';
                        submitButton.disabled = false;
                        submitButton.textContent = 'Join the Waitlist';
                    }
                } catch (error) {
                    console.error('Form submission error:', error);
                    messageDiv.className = 'block text-red-600 text-sm mt-2';
                    messageDiv.innerHTML = `
                        <strong>Connection Error:</strong><br>
                        Unable to connect to the server. Please ensure:<br>
                        • The backend server is running (port 8000)<br>
                        • You're accessing this page via http://localhost<br>
                    `;
                    submitButton.disabled = false;
                    submitButton.textContent = 'Join the Waitlist';
                }
            } else {
                // Production - Use Railway backend API
                const apiUrl = 'https://web-production-70d5c.up.railway.app/api/v1/forms/waitlist';

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();

                    if (response.ok && result.success) {
                        // Show success message
                        form.innerHTML = `
                            <div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                                <svg class="w-12 h-12 text-green-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Welcome to the Pancake family!</h3>
                                <p class="text-gray-600">We've sent you an email with more info (check your promotions or spam folder if you can't find it).</p>
                            </div>
                        `;
                    } else {
                        // Error - show message
                        messageDiv.className = 'block text-red-600 text-sm mt-2';
                        messageDiv.textContent = result.detail || result.message || 'Something went wrong. Please try again.';
                        submitButton.disabled = false;
                        submitButton.textContent = 'Join the Waitlist';
                    }
                } catch (error) {
                    console.error('Form submission error:', error);
                    messageDiv.className = 'block text-red-600 text-sm mt-2';
                    messageDiv.innerHTML = `
                        Unable to submit form. Please check your connection or
                        <a href="mailto:support@pancakemoney.com" class="underline">email us directly</a>.
                    `;
                    submitButton.disabled = false;
                    submitButton.textContent = 'Join the Waitlist';
                }
            }
        });
    </script>
</body>
</html>
